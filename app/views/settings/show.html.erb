<%= content_for :title do %>
  Settings
<% end %>

<div class="bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto">
  <h1 class="text-2xl font-bold text-gray-900 mb-6">Settings</h1>

  <%= form_with model: current_human, url: settings_path, method: :patch, class: "space-y-8" do |f| %>
    <div>
      <h2 class="text-lg font-medium text-gray-900 mb-4">Profile page</h2>

      <div class="flex items-center gap-3">
        <%= f.checkbox :share_currently_watching, class: "rounded border-gray-300 text-orange-500 focus:ring-orange-500", onchange: "this.form.requestSubmit()" %>
        <%= f.label :share_currently_watching, "Share currently watching", class: "text-gray-700" %>
      </div>
    </div>

    <div>
      <h2 class="text-lg font-medium text-gray-900 mb-4">Reviews</h2>

      <div class="space-y-4">
        <div>
          <%= f.label :default_review_visibility, "Default review visibility", class: "block text-sm font-medium text-gray-700 mb-2" %>

          <%= f.select(
              :default_review_visibility,
              [
                ["Anybody", "anybody"],
                ["Myself", "myself"]
              ],
              {},
              {
                class: "select-field w-auto",
                onchange: "this.form.requestSubmit()"
              }
            ) %>
        </div>

        <p class="text-sm text-gray-600">
          This is just a default for new reviews, you can pick another
          visibility on a review-by-review basis!
        </p>
      </div>
    </div>

    <div>
      <h2 class="text-lg font-medium text-gray-900 mb-4">Limits</h2>

      <div>
        <%= f.label :currently_watching_limit, "Currently watching limit", class: "block text-sm font-medium text-gray-700 mb-2" %>

        <%= f.select(
            :currently_watching_limit,
            [
              [["None", nil]],
              (1..10).map { [it.to_s, it] }
            ].flatten(1),
            {},
            {
              class: "select-field w-auto",
              onchange: "this.form.requestSubmit()"
            }
          ) %>
      </div>
    </div>

    <div>
      <h2 class="text-lg font-medium text-gray-900 mb-4">Time zone</h2>

      <div>
        <%= f.label :time_zone_name, "Time zone", class: "block text-sm font-medium text-gray-700 mb-2" %>

        <%= f.time_zone_select(:time_zone_name, nil, {}, { class: "select-field w-auto", onchange: "this.form.requestSubmit()" }) %>

        <p class="text-sm text-gray-600 mt-2">
          Where do you watch TV? This determines when episodes become available.
        </p>
      </div>
    </div>
  <% end %>

  <div class="mt-8 pt-8 border-t">
    <h2 class="text-lg font-medium text-gray-900 mb-4">Password</h2>

    <p class="text-sm text-gray-600 mb-4">
      <% if current_human.uses_password? %>
        You have a password set. You can sign in with either magic links or your
        password.
      <% else %>
        You currently sign in with magic links only. You can optionally set a
        password.
      <% end %>
    </p>

    <%= link_to current_human.uses_password? ? "Change password" : "Set password",
                edit_password_path,
                class: "inline-block rounded-button" %>
  </div>
</div>
