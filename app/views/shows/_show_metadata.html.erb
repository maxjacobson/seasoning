<%# locals: (show:) %>

<div class="mt-8 pt-8 border-t border-gray-200">
  <h2 class="text-lg font-medium text-gray-900 mb-4">FYI</h2>

  <ul class="space-y-2 text-sm text-gray-600">
    <% if show.orphaned? %>
      <li
        class="
          text-yellow-700 bg-yellow-50 border border-yellow-200 rounded px-2
          py-1
        "
      >
        This show is orphaned (no longer in TMDB data)
      </li>
    <% end %>

    <li>
      <span class="font-medium">Added by:</span>
      <span><%= pluralize(show.watchers_count, "person", "people") %></span>
    </li>

    <% if show.tmdb_next_refresh_at %>
      <li>
        <span class="font-medium">Data last refreshed:</span>

        <span title="<%= show.tmdb_last_refreshed_at %>">
          <%= time_ago_in_words show.tmdb_last_refreshed_at %> ago
        </span>
      </li>
    <% end %>

    <% if show.tmdb_next_refresh_at %>
      <li>
        <span class="font-medium">
          Data will next be refreshed within 24 hours of
        </span>

        <span title="<%= show.tmdb_next_refresh_at %>">
          <%= show.tmdb_next_refresh_at.to_date %>
        </span>
      </li>
    <% end %>
  </ul>

  <% if current_human&.admin? %>
    <div class="mt-4">
      <%= button_to "Refresh now!", show_refresh_path(show.slug), method: :post, class: "rounded-button" %>
    </div>
  <% end %>
</div>
